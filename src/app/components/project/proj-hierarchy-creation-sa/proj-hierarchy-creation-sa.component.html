<div class="row mt-5">
  <div class="col-md-4">
    <form
    [formGroup]="projHierarchyCreateForm"
    (ngSubmit)="onSubmitProjHierarchyCreate()"
  >
    <div class="row mt-2  proj-hierarchy-cont">
      <div class="col-md-6">
        <div class="red-tags">Project Hierarchy</div>
      </div>
      <div class="col-md-6">
        <select formControlName="projectHierarchyData" class="form-control form-select" >
          <option [ngValue]="'select'">Please select</option>
          <option
            *ngFor="let projHierarchy of projHierarchies; let i = index"
            [ngValue]="projHierarchy"
          >
            {{ projHierarchy.projectHierarchyName }}
          </option>
        </select>
        <div *ngIf="showSelectError" class="mt-2 mb-2">Please select hierarchy</div>
      </div>
      <button
        type="button"
        (click)="setTreeData()"
        class="btn bg-danger red-tags rounded-0 text-white view-btn"
      >
        Search
      </button>
    </div>
    <div class="row mt-2">
      <div class="col-md-6">
        <div class="red-tags">Project Designation</div>
      </div>
      <div class="col-md-6">
        <select formControlName="projDesgn" class="form-control form-select" (change)="setLevel($event)">
          <option [value]="null">Please select</option>
          <option
            *ngFor="let designation of designations; let i = index"
            [value]="designation.id"
          >
            {{ designation.designationName }}
          </option>
        </select>
      </div>
    </div>
    <div class="row mt-2">
      <div class="col-md-6">
        <div class="red-tags">Level</div>
      </div>
      <div class="col-md-6">
        <input
          type="text"
          class="form-control"
          id="email"
          formControlName="level"
        />
      </div>
    </div>
    <div class="row mt-2">
      <div class="col-md-6">
        <div class="red-tags">Linked To</div>
      </div>
      <div class="col-md-6">
        <select formControlName="linkedTo" class="form-control form-select">
          <option [value]="null">Please select</option>
          <option
            *ngFor="let linkedto of linkedToData; let i = index"
            [value]="linkedto.id"
          >
            {{ linkedto.designationName }}
          </option>
        </select>
      </div>
    </div>
    <div class="row mt-2">
      <div class="col-md-6">
        <button
        type="submit"
          class="btn bg-danger red-tags w-100 rounded-0 text-white"
          [disabled]="projHierarchyCreateForm.invalid"
        >
          Submit
        </button>
      </div>
    </div>
    <div class="row mt-2">
      <div class="col-12">
        <div *ngIf="projHierarchyData?.length">
          <table class="table table-striped">
            <thead>
              <tr>
                <th>#</th>
                <th>Project Designation</th>
                <th>Level</th>
                <th>Action</th>
              </tr>
            </thead>
            <tbody>
              <tr
                *ngFor="let pjData of projHierarchyData; let i = index"
                class="text-capitalize"
              >
                <td>{{ i + 1 }}</td>
                <td>{{ pjData.designation }}</td>
                <td>{{ pjData.level }}</td>
                <td>
                  <button
                    (click)="postEditId(pjData)"
                    class="btn btn-sm me-2"
                  >
                  <i class="fa fa-pencil"></i>
                  </button>
                  <button
                    (click)="postEditId(pjData)"
                    class="btn btn-sm"
                  >
                  <i class="fa fa-trash-o"></i>
                  </button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-12">
        <div *ngIf="showError" class="text-center">
          <P>{{ showError }}</P>
        </div>
      </div>
    </div>
    </form>
  </div>
  <div class="col-md-8 ptree" *ngIf="data && data.designationName">
    <tree-view #treeView [data]="data" [template]="treeTemplate"> </tree-view>
    <ng-template #treeTemplate let-node>
      <span class="icon-cont"
        ><img src="/assets/images/square.png" alt="image"
      /></span>
      <span class="desgn-cont">{{ node.designationName }}</span>
    </ng-template>
  </div>
</div>
